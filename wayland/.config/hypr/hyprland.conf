exec-once=/usr/lib/polkit-kde-authentication-agent-1
exec-once=waybar
exec-once=mako
exec-once=hyprpaper

env = LIBVA_DRIVER_NAME,nvidia
env = XDG_SESSION_TYPE,wayland
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = WLR_NO_HARDWARE_CURSORS,1
env = XCURSOR_SIZE,24

monitor = DP-1,highrr,auto,auto

windowrulev2 = float,class:^(nm-connection-editor)$
windowrulev2 = float,class:^(pavucontrol)$
windowrulev2 = opaque,class:^(firefox)$

general {
    border_size = 0
    gaps_in = 5
    gaps_out = 5
	
    layout = dwindle
	resize_on_border = yes
}

decoration {
    rounding = 0
    
    blur {
        enabled = true
        size = 3
        passes = 1
    }
}

# leaving as default
animations {
    enabled = yes

    bezier = myBezier, 0.05, 0.9, 0.1, 1.05

    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = borderangle, 1, 8, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}

input {
    sensitivity = -0.55 # -1.0 - 1.0, 0 means no modification.
	# maybe TODO, could be better
	
	touchpad {
	
	}
}

gestures {
    workspace_swipe = on
}

misc {
    disable_hyprland_logo = true
    enable_swallow = true
	swallow_regex = ^(Alacritty)$
}

dwindle {
    pseudotile = yes
    force_split=2
    preserve_split = yes
	no_gaps_when_only = 1
	# preselect layout msg to split in specific direction if ever need to
}

# KEY BINDINGS
$mod = SUPER

# power control
bind = $mod SHIFT, SEMICOLON, exec, ~/.config/swaylock/lock.sh
bind = $mod SHIFT, PERIOD, exec, poweroff
bind = $mod SHIFT, COMMA, exec, reboot

# TODO laptop lid switch binding

# open applications
bind = $mod, RETURN, exec, alacritty # super + shift + Return opens window in cwd
bind = $mod, SPACE, exec, firefox
bind = $mod, D, exec, discord
bind = $mod, S, exec, spotify-launcher
bind = $mod, A, exec, steam

# waybar control
bind = $mod, B, exec, killall -SIGUSR1 waybar
bind = $mod SHIFT, B, exec, killall waybar; waybar & disown; killall hyprpaper; hyprpaper & disown; makoctl reload

# TODO brightness control
bindle=, XF86MonBrightnessUp, exec, 
bindle=, XF86MonBrightnessDown, exec, 

# audio control
bindle=, XF86AudioRaiseVolume, exec, ~/.config/hypr/volume.sh up
bindle=, XF86AudioLowerVolume, exec, ~/.config/hypr/volume.sh down
bindl=, XF86AudioMute, exec, ~/.config/hypr/volume.sh togglemute
bindl=, XF86AudioPrev, exec, playerctl previous
bindl=, XF86AudioPlay, exec, playerctl play-pause
bindl=, XF86AudioNext, exec, playerctl next

# exit hyprland
bind = $mod SHIFT, Q, exit, 

# toggle gaming mode
bind = $mod, F8, exec, ~/.config/hypr/gamemode.sh

# window control
bind = $mod, W, killactive, 
bind = $mod, M, fullscreen, 1
bind = ALT, TAB, cyclenext, 
bind = ALT SHIFT, TAB, cyclenext, prev
bind = $mod, O, togglefloating, 
bind = $mod, P, pseudo, # dwindle
bind = $mod, I, togglesplit, # dwindle

# move focus with mod + hjkl
bind = $mod, h, movefocus, l
bind = $mod, j, movefocus, d
bind = $mod, k, movefocus, u
bind = $mod, l, movefocus, r

# move active window with mod + shift + hjkl
bind = $mod SHIFT, h, swapwindow, l
bind = $mod SHIFT, j, swapwindow, d
bind = $mod SHIFT, k, swapwindow, u
bind = $mod SHIFT, l, swapwindow, r

# switch workspaces with mod + [1-5]
bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod, 5, workspace, 5

# move active window to a workspace with mod + SHIFT + [1-5]
bind = $mod SHIFT, 1, movetoworkspace, 1
bind = $mod SHIFT, 2, movetoworkspace, 2
bind = $mod SHIFT, 3, movetoworkspace, 3
bind = $mod SHIFT, 4, movetoworkspace, 4
bind = $mod SHIFT, 5, movetoworkspace, 5

# scroll through existing workspaces with mod + scroll
bind = $mod, mouse_down, workspace, e+1
bind = $mod, mouse_up, workspace, e-1

# brackets to move between workspaces
bind = $mod, bracketright, workspace, +1
bind = $mod, bracketleft, workspace, -1

# move/resize windows with mod + LMB/RMB and dragging
bindm = $mod, mouse:272, movewindow
bindm = $mod, mouse:273, resizewindow

# submwap to resize active window
bind=$mod,R,submap,RESIZE
submap=RESIZE
binde=,h,resizeactive,-10 0
binde=,j,resizeactive,0 10
binde=,k,resizeactive,0 -10
binde=,l,resizeactive,10 0
bind=,escape,submap,reset 
submap=reset

# submwap to move active window
bind=$mod,E,submap,MOVE
submap=MOVE
binde=,h,moveactive,-10 0
binde=,j,moveactive,0 10
binde=,k,moveactive,0 -10
binde=,l,moveactive,10 0
bind=,escape,submap,reset 
submap=reset
